<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Why Teams Win</title>
        <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@320&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="style.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            Chart.defaults.color = 'white';
            Chart.defaults.font.family = '"Oswald", sans-serif';
            Chart.defaults.font.size = 16;
</script>
    </head>
    <body>
        <div class="sidebar">
            <div>
                <h2>Content</h2>
                <a href="#preamble">Preamble</a>
                <a href="#section1">Field Position & Turnovers</a>
                <a href="#section2">Team Efficiency Statistics</a>
                <a href="#section3">Quarterback Performance</a>
            </div><br>
            <div>
                <h2>Links</h2>
                <a href="https://www.nfeloapp.com" target="_blank">nfeloapp</a>
                <a href="https://www.pro-football-reference.com/" target="_blank">pro-football-reference</a>
            </div>
        </div>

        <div class="content">
            <div class="banner">
                <img src="bradyindallas.jpeg" alt="Website Banner">
            </div> 
            <div class="text">
                <div>
                    <h1 id="preamble">Why Do Teams Win in the NFL?</h1>
                    <p>Well, if you're the New York Jets, you dont. For everyone else, winning is typically driven by a few key factors. Trying to a specific value to every stat is not something I'm willing to undertake, but we can group the most important metrics into three core categories: Field Position & Turnovers, QB Performance, and Team Efficiency.</p>
                    <p>The goal of football is simple: score more points than your opponent. Offense, defense and special teams can all score points, but we will only be looking at how these categories affect offensive drives. Defensive and special teams touchdowns are too big of an outlier to be a reliable indicator.</p>
                    <br>
                    <h2>Breaking Down the "Drive"</h2>
                    <p>Every drive has 3 stages: <strong>start</strong>, <strong>advance</strong>,<strong> finish</strong>.</p>
                    <ul>
                        <li><strong>Start</strong>: Where the drive begins or starting <strong>field position</strong>.</li>
                        <li><strong>Advance</strong>: Moving the ball down the field and avoiding <strong>turnovers</strong>.</li>
                        <li><strong>Finish</strong>: Converting opportunity into points.</li>
                    </ul>
                    <p>All of our metrics connect to these stages in varying degrees and often overlap.</p>
                
                    <h2>EP & EPA in a Nutshell</h2>
                    <p>You'll see Expected Points (EP) and Expected Points Added (EPA) mentioned here:</p>
                    <ul>
                        <li><strong>EP</strong>: How many points a drive is expected to produce when it starts.</li>
                        <li><strong>EPA</strong>: How much a single play increases or decreases that expectation, attributed to the individual players involved.</li>
                    </ul>
                    <p>This is a simplified explanation. If you want to dive deeper into the methodology, you can read more about it <a href="https://www.nfeloapp.com/analysis/expected-points-added-epa-nfl/" target="_blank"><strong>here</strong></a>.</p>
                </div><br><br><br>
                <div>
                    <h1 id="section1">Field Position & Turnovers</h1>
                    <p>Every drive must start somewhere, and the farther up field it starts, the more likely a team is to come away with points. Even minor differences in <heavy>starting field position</heavy> (SFP) can have a large impact on the outcome of a game. The first two things we will look at is Expected Points based on SFP and SFP Margin vs Winrate. </p>
                    <div class="chart">
                        <canvas id="FPtoEP"></canvas>
                        <script>
                            const FPtoEPChart = document.getElementById('FPtoEP');
                            new Chart(FPtoEPChart, {
                                type: 'line',
                                data:  {
                                    labels: ['Own 1-10','Own 11-20','Own 21-30','Own 31-40','Own 41-50','Opp 49-40','Opp 39-30','Opp 29-20','Opp 19-10','Opp 9-1'],
                                    datasets: [{
                                        label: 'SFP & Expected Points',
                                        data: [-0.7, 0.3, 0.8, 1.4, 2.0, 2.5, 3.0, 3.8, 4.5, 5.5]
                                    }]
                                },
                                options: {
                                    plugins: {
                                        legend: {
                                            labels: {
                                                boxWidth: 0
                                            }
                                        }
                                    },
                                    scales: {
                                        x: {
                                            title: {
                                                display: true,
                                                text: 'Starting Field Position',
                                            }
                                        },
                                        y: {
                                            title: {
                                                display: true,
                                                text: 'Expected Points',
                                            },
                                            beginAtZero: true
                                        }
                                    }
                                }
                            })
                        </script>
                    </div>
                    <div class="chart">
                        <canvas id="SFPMargin"></canvas>
                        <script>
                            const SFPMArginChart = document.getElementById('SFPMargin');
                            new Chart(SFPMArginChart, {
                                type: 'line',
                                data:  {
                                    labels: ['15 or more','10 to 15','5 to 10','0 to 5','-5 to 0','-10 to -5','-15 to -10','-15 or less'],
                                    datasets: [{
                                        label: 'SFP Margin vs Winrate',
                                        data: [85.7, 78.3, 67.2, 53.2, 46.5, 32.1, 21.8, 14.5]
                                    }]
                                },
                                options: {
                                    plugins: {
                                        legend: {
                                            labels: {
                                                boxWidth: 0
                                            }
                                        }
                                    },
                                    scales: {
                                        x: {
                                            categoryPercentage: 0.,
                                            title: {
                                                display: true,
                                                text: 'SFP Margin',
                                            }
                                        },
                                        y: {
                                            title: {
                                                display: true,
                                                text: 'Winrate',
                                            },
                                            beginAtZero: true
                                        }
                                    }
                                }
                            })
                        </script>
                    </div>
                    <div class="chart">
                        <canvas id="TOMargin"></canvas>
                    </div>
                        <script>
                            const TOMarginChart = document.getElementById('TOMargin');
                            new Chart(TOMarginChart, {
                                type: 'bar',
                                data: {
                                    labels: ['4+', '3', '2', '1'],
                                    datasets: [{
                                        label: 'TO Margin & Win Rate',
                                        data: [98, 90, 84, 67],
                                        barPercentage: 0.5, 
                                    }]
                                },
                                options: {
                                    plugins: {
                                        legend: {
                                            labels: {
                                                boxWidth: 0
                                            }
                                        }
                                    }
                                }
                            })
                        </script>
                </div><br><br><br>
                <div>
                    <h1 id="section3">Team Efficiency Statistics</h1>
                <p>Coming soon...</p>
                </div><br><br><br><br><br><br><br><br><br><br><br><br>
                <div>
                    <h1 id="section2">Quarterback Performance</h1>
                    <p>Coming soon...</p>
                </div>
            </div>
        </div>
    </body>
</html>